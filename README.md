# w11arm_addDrivers - a utility to rebuild Windows 11 ARM ISO with VMware network drivers

## What is w11arm_addDrivers?

w11arm_addDrivers is a utility that rebuilds an existing Windows 11 ARM installation ISO, adding the VMware vmxnet3 network driver.

## Why is it useful?

Windows 11 ARM ISOs created by tools other than VMware Fusion's "Get Windows from Microsoft" or vmw_esd2iso do not have a driver for
the VMware vmxnet3 virtual NIC that's presented by a VMware Fusion VM. No driver, no network.
 
The Windows out-of-box experience (OOBE) is expecting to have network connectivity to complete a Windows installation. Since a
network isn't present, the OOBE stalls and continues to ask for a network connection. 
When this happens, manual intervention through a command prompt is required to proceed beyond this stage.

w11arm_addDrivers addresses this issue by building a new ISO from an existing Windows 11 ARM intallation ISO. During the rebuild
process, it adds the VMware vmxnet3 virtual network drivers for Windows 11 ARM (from the VMwware Tools installer that's part of Fusion). 
Creating a new Fusion VM from this new ISO enables the Windows OOBE to detect and configure a network, facilitating a more seamless installation process.  

As an additional benefit, the ISO generated by w11arm_addDrivers eliminates the inconvenient Microsoft "feature" 
of "Press any key to boot from CD or DVD...".
The ISO will boot directly into the Windows setup without any further intervention.

## Prerequisites 

* Apple Silicon Macs running macOS 13 or later.
* VMware Fusion 13.5 or later must be installed and located at /Applications/VMware Fusion.app.
* A Windows 11 ARM installation ISO file (from UUPdump, CrystalFetch, or some other source).

## Usage

```
w11arm_addDrivers [-hV] path-to-Windows11-ISO-file

Options:
	-V			Print version of utility and exit
	-h			Print usage (help) information and exit
```

## Installation

* Download this project from GitHub: https://github.com/Technogeezer50/w11arm_addDrivers. The latest released version
can be found in the "Releases" section on the right hand side of the project page. You can download either
the .zip or .tar.gz format file.
* Extract the downloaded file.
* Move or copy the file w11arm_addDrivers to a location of your choice (preferably an empty folder where you will build your ISO)
* Open the macOS Terminal app, and cd to the empty folder.
* Change permissions on w11arm_addDrivers to make it executable (it does not require root permissions).
* Run w11arm_addDrivers.

## Notes

### Disk space rqquirements

w11arm_addDriver creates the new ISO and a temporary imaging folder in the current working directory.

* The temporary imaging folder needs approimately 6 GB of disk space to extract the source ISO's contents. This folder will be deleted
after the re-mastered ISO is created.
* The re-mastered ISO will consume approximately 5 GB of disk space.

w11arm_addDriver will check for at least 12 GB of free space in the file system containing the current working directory. It will
exit before doing anythning if it estimates it will run out of space during the re-mastering process.

### Who should use this?

Most users wanting to install a Windows 11 ARM VM in VMware Fusion should use Fusion's built-in tools to download the installation ISO. 
Fusion's built-in tools download the latest general availablitity channel ESD from
Microsoft, add the VMware network driver, and create the ISO.

w11arm_addDrivers is primarily designed for users that have Windows 11 ARM ISOs from other sources such as:

- UUPdump (Windows Insider Dev, Beta, Canary or Release Preview channels)
- CrystalFetch
- Parallels Desktop
- Any future "consumer" Windows 11 ARM ISO that Microsoft may make available from its websites.

These ISO typically do not contain the VMware vmxnet3 network driver needed for VMware Fusion VMs.

> [!CAUTION]
> w11arm_addDrivers is not needed for and should not be used on Windows 11 x64 (Intel/AMD 64-bit) ISOs. These ISOs already contain
> the appropriate drivers for VMware hypervisor products that run on Intel/AMD CPUs and operating systems.

## Found a bug?

Please report any bugs as an issue in w11arm_addDriver's repository on GitHub.

> [!NOTE]
> Requests for assistance on how to use w11arm_addDrivers are not considered bugs.
> But if the documentation is unclear, please report that as a bug. 

## Licensing

w11arm_addDrivers is Copyright (C) 2024 Paul Rockwell.

You may freely use and modify this utility for use in your own projects. If you do modify w11arm_addDrivers, please provide attribution,
and offer it with the same freedom to use as I've offered it you.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  

